<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registrar Partos</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <script>
        function prepararBusqueda() {
            // Desactivar la validación de los campos adicionales
            document.getElementById('numero_parto').required = false;
            document.getElementById('nacidos').required = false;
            document.getElementById('muertos_bebes').required = false;
            document.getElementById('muertos_reproductores').required = false;
            return true; // Continuar con el envío del formulario
        }
    </script>
</head>
<body>
    <h1>Registrar Partos</h1>

    <!-- Formulario único para registrar y buscar partos -->
    <form method="POST" action="{{ url_for('registrar_partos') }}">
        <label for="galpon">Galpón:</label>
        <select id="galpon" name="galpon" required>
            <option value="">Seleccione un galpón</option>
            {% for galpon in galpones_unicos %}
                <option value="{{ galpon }}">{{ galpon }}</option>
            {% endfor %}
        </select>

        <label for="poza">Poza:</label>
        <select id="poza" name="poza" required>
            <option value="">Seleccione una poza</option>
            {% for poza in pozas_unicas %}
                <option value="{{ poza }}">{{ poza }}</option>
            {% endfor %}
        </select>

        <label for="numero_parto">Número de Parto:</label>
        <input type="number" id="numero_parto" name="numero_parto" required>

        <label for="nacidos">Nacidos:</label>
        <input type="number" id="nacidos" name="nacidos" required>

        <label for="muertos_bebes">Muertos Bebés:</label>
        <input type="number" id="muertos_bebes" name="muertos_bebes" required>

        <label for="muertos_reproductores">Muertos Reproductores:</label>
        <input type="number" id="muertos_reproductores" name="muertos_reproductores" required>

        <!-- Botones para registrar o buscar -->
        <button type="submit" name="action" value="registrar">Registrar Parto</button>
        <button type="submit" name="action" value="buscar" onclick="return prepararBusqueda()">Buscar Partos</button>
    </form>

    <!-- Botón para regresar al inicio -->
    <a href="{{ url_for('index') }}" style="margin-top: 20px; display: inline-block;">
        <button>Regresar al Inicio</button>
    </a>

    <!-- Mostrar mensajes flash -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
    {% endwith %}
</body>
</html>